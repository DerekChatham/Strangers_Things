{"ast":null,"code":"import _slicedToArray from\"/home/derekchatham/Strangers_Things/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/home/derekchatham/Strangers_Things/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/derekchatham/Strangers_Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState}from'react';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var styles={searchContainer:{display:'flex',padding:'16px',alignItems:'center'},searchInput:{margin:'0 16px'}};var postMatches=function postMatches(post,searchTerm){var searchTermLower=searchTerm.toLowerCase();var description=post.description,location=post.location,title=post.title,username=post.author.username;var toMatch=[description,location,title,username];for(var _i=0,_toMatch=toMatch;_i<_toMatch.length;_i++){var field=_toMatch[_i];if(field.toLowerCase().includes(searchTermLower)){return true;}}};var deletePost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(BASE_URL,\"/posts/\").concat(post._id),{method:\"DELETE\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem(\"token\"))}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function deletePost(){return _ref.apply(this,arguments);};}();var Posts=function Posts(_ref2){var posts=_ref2.posts;var history=useHistory();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchTerm=_useState2[0],setSearchTerm=_useState2[1];var postsToDisplay=posts.filter(function(post){return postMatches(post,searchTerm);});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.searchContainer,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Posts\"}),/*#__PURE__*/_jsx(\"input\",{style:styles.searchInput,type:\"text\",placeholder:\"search for posts\",value:searchTerm,onChange:function onChange(event){console.log(event.target.value);setSearchTerm(event.target.value);}})]}),postsToDisplay.length?postsToDisplay.map(function(post){return/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid black'},children:[/*#__PURE__*/_jsx(\"h5\",{children:post.title}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Posted by: \",post.author.username]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Description: \",post.description]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Location: \",post.location]}),/*#__PURE__*/_jsxs(\"div\",{id:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return history.push(\"/posts/\".concat(post._id));},children:\"View Post\"}),/*#__PURE__*/_jsx(\"button\",{onClick:deletePost,children:\"Delete Post\"})]})]},post._id);}):/*#__PURE__*/_jsx(\"div\",{children:\"No posts to display\"})]});};export default Posts;","map":{"version":3,"sources":["/home/derekchatham/Strangers_Things/src/components/Posts.js"],"names":["React","useState","useHistory","styles","searchContainer","display","padding","alignItems","searchInput","margin","postMatches","post","searchTerm","searchTermLower","toLowerCase","description","location","title","username","author","toMatch","field","includes","deletePost","fetch","BASE_URL","_id","method","headers","localStorage","getItem","response","json","data","console","log","Posts","posts","history","setSearchTerm","postsToDisplay","filter","event","target","value","length","map","border","push"],"mappings":"+VAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,6IAEA,GAAMC,CAAAA,MAAM,CAAG,CACbC,eAAe,CAAE,CACfC,OAAO,CAAE,MADM,CAGfC,OAAO,CAAE,MAHM,CAIfC,UAAU,CAAE,QAJG,CADJ,CAObC,WAAW,CAAE,CACXC,MAAM,CAAE,QADG,CAPA,CAAf,CAYA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,IAAD,CAAOC,UAAP,CAAsB,CACxC,GAAMC,CAAAA,eAAe,CAAGD,UAAU,CAACE,WAAX,EAAxB,CACA,GACEC,CAAAA,WADF,CAKIJ,IALJ,CACEI,WADF,CAEEC,QAFF,CAKIL,IALJ,CAEEK,QAFF,CAGEC,KAHF,CAKIN,IALJ,CAGEM,KAHF,CAIYC,QAJZ,CAKIP,IALJ,CAIEQ,MAJF,CAIYD,QAJZ,CAOA,GAAME,CAAAA,OAAO,CAAG,CAACL,WAAD,CAAcC,QAAd,CAAwBC,KAAxB,CAA+BC,QAA/B,CAAhB,CAEA,sBAAoBE,OAApB,yBAA6B,CAAxB,GAAMC,CAAAA,KAAK,aAAX,CACH,GAAIA,KAAK,CAACP,WAAN,GAAoBQ,QAApB,CAA6BT,eAA7B,CAAJ,CAAmD,CACjD,MAAO,KAAP,CACD,CACF,CACF,CAhBD,CAkBA,GAAMU,CAAAA,UAAU,0FAAG,2LAEQC,CAAAA,KAAK,WAAIC,QAAJ,mBAAsBd,IAAI,CAACe,GAA3B,EAAmC,CAC7DC,MAAM,CAAE,QADqD,CAE7DC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,iCAA2BC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA3B,CAFO,CAFoD,CAAnC,CAFb,QAETC,QAFS,qCAWIA,CAAAA,QAAQ,CAACC,IAAT,EAXJ,QAWTC,IAXS,8FAefC,OAAO,CAACC,GAAR,cAfe,oEAAH,kBAAVZ,CAAAA,UAAU,0CAAhB,CAmBA,GAAMa,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,OAAe,IAAZC,CAAAA,KAAY,OAAZA,KAAY,CAC3B,GAAMC,CAAAA,OAAO,CAAGpC,UAAU,EAA1B,CACA,cAAoCD,QAAQ,CAAC,EAAD,CAA5C,wCAAOW,UAAP,eAAmB2B,aAAnB,eAEA,GAAMC,CAAAA,cAAc,CAAGH,KAAK,CAACI,MAAN,CAAa,SAAC9B,IAAD,QAAUD,CAAAA,WAAW,CAACC,IAAD,CAAOC,UAAP,CAArB,EAAb,CAAvB,CACA,mBACE,wCACE,aAAK,KAAK,CAAET,MAAM,CAACC,eAAnB,wBACE,6BADF,cAEE,cACE,KAAK,CAAED,MAAM,CAACK,WADhB,CAEE,IAAI,CAAC,MAFP,CAGE,WAAW,CAAC,kBAHd,CAIE,KAAK,CAAEI,UAJT,CAKE,QAAQ,CAAE,kBAAC8B,KAAD,CAAW,CACnBR,OAAO,CAACC,GAAR,CAAYO,KAAK,CAACC,MAAN,CAAaC,KAAzB,EACAL,aAAa,CAACG,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAb,CACD,CARH,EAFF,GADF,CAcGJ,cAAc,CAACK,MAAf,CACCL,cAAc,CAACM,GAAf,CAAmB,SAACnC,IAAD,qBACjB,aAAoB,KAAK,CAAE,CAAEoC,MAAM,CAAE,iBAAV,CAA3B,wBACE,oBAAKpC,IAAI,CAACM,KAAV,EADF,cAEE,qCAAiBN,IAAI,CAACQ,MAAL,CAAYD,QAA7B,GAFF,cAGE,uCAAmBP,IAAI,CAACI,WAAxB,GAHF,cAIE,oCAAgBJ,IAAI,CAACK,QAArB,GAJF,cAKE,aAAK,EAAE,CAAE,SAAT,wBACA,eAAQ,OAAO,CAAE,yBAAMsB,CAAAA,OAAO,CAACU,IAAR,kBAAuBrC,IAAI,CAACe,GAA5B,EAAN,EAAjB,uBADA,cAIA,eAAQ,OAAO,CAAEH,UAAjB,yBAJA,GALF,GAAUZ,IAAI,CAACe,GAAf,CADiB,EAAnB,CADD,cAgBC,4CA9BJ,GADF,CAmCD,CAxCD,CA0CA,cAAeU,CAAAA,KAAf","sourcesContent":["import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nconst styles = {\n  searchContainer: {\n    display: 'flex',\n   \n    padding: '16px',\n    alignItems: 'center',\n  },\n  searchInput: {\n    margin: '0 16px',\n  },\n};\n\nconst postMatches = (post, searchTerm) => {\n  const searchTermLower = searchTerm.toLowerCase();\n  const {\n    description,\n    location,\n    title,\n    author: { username },\n  } = post;\n\n  const toMatch = [description, location, title, username];\n\n  for (const field of toMatch) {\n    if (field.toLowerCase().includes(searchTermLower)) {\n      return true;\n    }\n  }\n};\n\nconst deletePost = async () => {\n  try {\n    const response = await fetch(`${BASE_URL}/posts/${post._id}` , {\n      method: \"DELETE\",\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem(\"token\")}`\n      }\n\n    })\n\n    const data = await response.json();\n\n      \n  } catch (error) {\n    console.log(error);\n  }\n}\n\nconst Posts = ({ posts }) => {\n  const history = useHistory();\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const postsToDisplay = posts.filter((post) => postMatches(post, searchTerm));\n  return (\n    <>\n      <div style={styles.searchContainer}>\n        <h2>Posts</h2>\n        <input\n          style={styles.searchInput}\n          type=\"text\"\n          placeholder=\"search for posts\"\n          value={searchTerm}\n          onChange={(event) => {\n            console.log(event.target.value);\n            setSearchTerm(event.target.value);\n          }}\n        ></input>\n      </div>\n      {postsToDisplay.length ? (\n        postsToDisplay.map((post) => (\n          <div key={post._id} style={{ border: '1px solid black' }}>\n            <h5>{post.title}</h5>\n            <div>Posted by: {post.author.username}</div>\n            <div>Description: {post.description}</div>\n            <div>Location: {post.location}</div>\n            <div id ='buttons'>\n            <button onClick={() => history.push(`/posts/${post._id}`)}>\n              View Post\n            </button>\n            <button onClick={deletePost}>Delete Post</button>\n            </div>\n          </div>\n        ))\n      ) : (\n        <div>No posts to display</div>\n      )}\n    </>\n  );\n};\n\nexport default Posts;"]},"metadata":{},"sourceType":"module"}